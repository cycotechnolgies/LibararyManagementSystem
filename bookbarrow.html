<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Library Management System</title>
    <link rel="stylesheet" href="dilru.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body class="container">
    <h1 class="text-center my-4">Library Management System</h1>

    <div id="formPage" class="form-container">
        <h2>Add Borrow Details</h2>
        <form id="borrowForm">
            <div class="form-group">
                <label for="borrowId">Borrow ID:</label>
                <input type="text" class="form-control" id="borrowId" name="borrowId" required>
            </div>
            <div class="form-group">
                <label for="bookId">Book ID:</label>
                <input type="text" class="form-control" id="bookId" name="bookId" required>
            </div>
            <div class="form-group">
                <label for="memberId">Member ID:</label>
                <input type="text" class="form-control" id="memberId" name="memberId" required>
            </div>
            <div class="form-group">
                <label for="borrowStatus">Borrow Status:</label>
                <select id="borrowStatus" class="form-control" name="borrowStatus" required>
                    <option value="borrowed">Borrowed</option>
                    <option value="available">Available</option>
                </select>
            </div>
            <button type="button"  onclick="addBorrowDetail()">Add Borrow Detail</button>
        </form>
    </div>

    <div id="detailsPage" class="form-container" style="display: none;">
        <h2>Borrow Details</h2>
        <div class="table-responsive">
            <table class="table table-bordered" id="borrowTable">
                <thead class="thead-light">
                    <tr>
                        <th>Borrow ID</th>
                        <th>Book ID</th>
                        <th>Member ID</th>
                        <th>Borrow Status</th>
                        <th>Date Modified</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="borrowTableBody">
                </tbody>
            </table>
        </div>
        <button type="button" onclick="showFormPage()">Add More</button>
    </div>

    <script>
        function addBorrowDetail() {
            // Get the form element
            const borrowForm = document.getElementById('borrowForm');

            // Check if form is valid
            if (!borrowForm.checkValidity()) {
                // If the form is not valid, display an error message
                borrowForm.reportValidity();
                return;
            }

            // Get form values
            const borrowId = document.getElementById('borrowId').value;
            const bookId = document.getElementById('bookId').value;
            const memberId = document.getElementById('memberId').value;
            const borrowStatus = document.getElementById('borrowStatus').value;

            // Create new row
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                <td>${borrowId}</td>
                <td>${bookId}</td>
                <td>${memberId}</td>
                <td>${borrowStatus}</td>
                <td>${new Date().toLocaleString()}</td>
                <td>
                    <button type="button" class="btn btn-sm btn-warning" onclick="editRow(this)" title="Edit">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button type="button" class="btn btn-sm btn-danger" onclick="deleteRow(this)" title="Delete">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                </td>
            `;

            // Append new row to table body
            document.getElementById('borrowTableBody').appendChild(newRow);

            // Show details page and hide form page
            document.getElementById('formPage').style.display = 'none';
            document.getElementById('detailsPage').style.display = 'block';
        }

        function deleteRow(button) {
            // Delete the row
            const row = button.parentNode.parentNode;
            row.parentNode.removeChild(row);
        }

        function editRow(button) {
            // Get the row to edit
            const row = button.parentNode.parentNode;
            const borrowId = row.children[0].textContent;
            const bookId = row.children[1].textContent;
            const memberId = row.children[2].textContent;
            const borrowStatus = row.children[3].textContent;

            // Set form values
            document.getElementById('borrowId').value = borrowId;
            document.getElementById('bookId').value = bookId;
            document.getElementById('memberId').value = memberId;
            document.getElementById('borrowStatus').value = borrowStatus;

            // Delete the row
            row.parentNode.removeChild(row);

            // Show form page and hide details page
            document.getElementById('formPage').style.display = 'block';
            document.getElementById('detailsPage').style.display = 'none';
        }

        function showFormPage() {
            // Show form page and hide details page
            document.getElementById('formPage').style.display = 'block';
            document.getElementById('detailsPage').style.display = 'none';

            // Clear form fields
            document.getElementById('borrowForm').reset();
        }
    </script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
